# Simple test configuration for onnx-binding mmBERT
# This config enables basic embedding functionality for testing

# Response API Configuration
response_api:
  enabled: true
  store_backend: "memory"
  ttl_seconds: 86400
  max_responses: 1000

# Router Replay Configuration
router_replay:
  store_backend: "memory"
  ttl_seconds: 2592000
  async_writes: true

# Semantic Cache Configuration - uses mmBERT embeddings
semantic_cache:
  enabled: true
  backend_type: "memory"
  similarity_threshold: 0.85
  max_entries: 1000
  ttl_seconds: 3600
  eviction_policy: "fifo"
  # Use mmBERT 32K ONNX model for embeddings
  embedding_model: "mmbert"

# Embedding Models Configuration - mmBERT 32K via ONNX Runtime
embedding_models:
  use_cpu: true
  # mmBERT 32K YaRN model path (local ONNX)
  mmbert_model_path: "onnx-binding/mmbert-32k-yarn-onnx"

# Tools Configuration - uses embeddings for semantic matching
tools:
  enabled: true
  tools_db_path: "config/tools_db.json"
  model_type: "mmbert"  # Use mmBERT for tool matching
  target_dim: 0  # Use full dimension (768)
  similarity_threshold: 0.7

# Disable classifiers for simple testing
prompt_guard:
  enabled: false

classifier:
  category_model:
    enabled: false
  pii_model:
    enabled: false

feedback_detector:
  enabled: false

hallucination_mitigation:
  enabled: false

# vLLM Endpoints Configuration
vllm_endpoints:
  - name: "ollama"
    address: "127.0.0.1"
    port: 11434
    weight: 1

model_config:
  "qwen2.5:3b":
    reasoning_family: "qwen3"
    preferred_endpoints: ["ollama"]

# Simple categories for testing
categories:
  - name: general
    description: "General queries"
  - name: technical
    description: "Technical questions"

decisions:
  - name: "default"
    description: "Default routing"
    priority: 100
    rules:
      operator: "OR"
      conditions:
        - type: "domain"
          name: "general"
    modelRefs:
      - model: "qwen2.5:3b"
        use_reasoning: false
        weight: 100
